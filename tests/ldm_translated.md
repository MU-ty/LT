---
status: translated
title: "LDM - Logical Disk Manager (Dynamic Disks)"
author: Linux Kernel Community
collector: tttturtle-russ
collected_date: 20240718
translator: FILL_YOUR_GITHUB_ID_HERE
translating_date: 20251001
link: https://git.kernel.org/pub/scm/linux/kernel/git/torvalds/linux.git/tree/Documentation/admin-guide/ldm.rst
---

# LDM - 逻辑磁盘管理器（动态磁盘）

作者

:   最初由 FlatCap（Richard Russon）撰写  
    \\<<ldm@flatcap.org>\\>。

最后更新

:   Anton Altaparmakov 于 2007 年 3 月 30 日针对 Windows Vista 更新。

## 概述

Windows 2000、XP 和 Vista 采用了一种新的分区方案，完全取代了传统的 MSDOS 风格分区。该方案在物理磁盘末尾使用一个大小为 1MiB 的带日志数据库来存储信息。分区大小仅受磁盘空间限制，最大可支持近 2000 个分区。

在 LDM 下创建的任何分区均称为“动态磁盘”。传统意义上的主分区和扩展分区不再存在，而标准的 MSDOS 风格分区现在被称为“基本磁盘”。

若要使用跨区卷、条带卷、镜像卷或 RAID 5 卷，则必须使用动态磁盘。日志功能使得 Windows 能够在无需重启的情况下修改这些分区及其文件系统。

LDM 驱动完成磁盘划分后，可通过 MD 驱动组装多分区卷，例如条带卷、RAID5 等。

为了防止旧版应用程序重新对磁盘进行分区，LDM 会创建一个虚拟的 MSDOS 分区，其中包含一个与整个磁盘大小相同的分区。Linux 的 LDM 驱动目前仅支持这种结构。

Vista 引入了一种较新的方法：将 LDM 建立在 GPT 标签磁盘之上。目前 Linux 的 LDM 驱动尚不支持此方式。

片段2:

以下是一个被划分为七个分区的 50MiB 磁盘示例。  
:::: note  
::: title  
注意  
:::  
磁盘末尾缺失的 1MiB 空间用于存储 LDM 数据库。  
::::

片段3:

+------------+------------------+---------+-----++------------------+---------+-----+
| 偏移量（字节） | 扇区数           | MiB     |    || 大小（字节）       | 扇区数   | MiB |
+============+==================+=========+=====++==================+=========+=====+
| 0          | 0                | 0       |    || 52428800         | 102400  | 50  |
+------------+------------------+---------+-----++------------------+---------+-----+
| 51380224   | 100352           | 49      |    || 1048576          | 2048    | 1   |
+------------+------------------+---------+-----++------------------+---------+-----+
| 16384      | 32               | 0       |    || 6979584          | 13632   | 6   |
+------------+------------------+---------+-----++------------------+---------+-----+
| 6995968    | 13664            | 6       |    || 10485760         | 20480   | 10  |
+------------+------------------+---------+-----++------------------+---------+-----+
| 17481728   | 34144            | 16      |    || 4194304          | 8192    | 4   |
+------------+------------------+---------+-----++------------------+---------+-----+
| 21676032   | 42336            | 20      |    || 5242880          | 10240   | 5   |
+------------+------------------+---------+-----++------------------+---------+-----+
| 26918912   | 52576            | 25      |    || 10485760         | 20480   | 10  |
+------------+------------------+---------+-----++------------------+---------+-----+
| 37404672   | 73056            | 35      |    || 13959168         | 27264   | 13  |
+------------+------------------+---------+-----++------------------+---------+-----+

LDM 数据库可能不会按照磁盘上的实际顺序存储分区信息，但驱动程序会自动对其进行排序。

片段4:

Linux 启动时，你会看到类似如下信息：

    hda: 102400 sectors w/32KiB Cache, CHS=50/64/32
    hda: [LDM] hda1 hda2 hda3 hda4 hda5 hda6 hda7

片段5:

## 编译 LDM 支持

要启用 LDM，请选择以下两个选项：

> -   “高级分区选择” CONFIG_PARTITION_ADVANCED  
> -   “Windows 逻辑磁盘管理器（动态磁盘）支持”  
>     CONFIG_LDM_PARTITION

如果你认为驱动程序运行异常，可以启用额外的调试代码，但这会产生大量输出。相关选项为：

> -   “Windows LDM 额外日志记录” CONFIG_LDM_DEBUG

**注意：LDM 分区代码无法编译为模块。**

与所有分区代码一样，如果驱动程序未检测到其对应的分区类型，将会把控制权交给其他驱动程序，因此启用该功能并无风险。

如果你拥有动态磁盘但未启用 LDM 驱动，则只能看到一个占据整个磁盘的虚拟 MSDOS 分区，无法挂载磁盘上的任何卷。

## 启动引导

如果启用了 LDM 支持，lilo 可以从任意发现的分区启动系统。然而，grub 不识别 LDM 分区结构，因此无法从动态磁盘启动。

## 更多文档

有关 LDM 的概述及完整技术文档可供下载：

> <http://www.linux-ntfs.org/>

如果文档中未能解答你的 LDM 相关问题，欢迎发送邮件联系我。

致意，  

:   FlatCap - Richard Russon <ldm@flatcap.org>